<!DOCTYPE html>
<html>

<head>
    <link rel="stylesheet" href="styles.css">
    <link href='https://fonts.googleapis.com/css?family=Source+Sans+Pro' rel='stylesheet' type='text/css'>
</head>

<body>
<!-- VIDEOS -->
<div id="videos">
    <!-- Introduction -->
    <video id="video1">
        <source src="assets/PiDi_1.mp4" type="video/mp4">
    </video>
    <video id="video2">
        <source src="assets/PiDi_2a.mp4" type="video/mp4">
    </video>
    <video id="video3">
        <source src="assets/PiDi_2b.mp4" type="video/mp4">
    </video>
    <video id="video4">
        <source src="assets/PiDi_2c.mp4" type="video/mp4">
    </video>
    <video id="video5">
        <source src="assets/PiDi_2d.mp4" type="video/mp4">
    </video>
    <video id="video6">
        <source src="assets/PiDi_2e.mp4" type="video/mp4">
    </video>
    <!-- Trial 1 -->
    <video id="trial1a">
        <source src="assets/PiDi_3_1a_gg.mp4" type="video/mp4">
    </video>
    <video id="trial1b">
        <source src="assets/PiDi_3_1b.mp4" type="video/mp4">
    </video>
    <video id="trial1c">
        <source src="assets/PiDi_3_1c.mp4" type="video/mp4">
    </video>
    <video id="trial1d">
        <source src="assets/PiDi_3_1d.mp4" type="video/mp4">
    </video>
    <!-- Trial 2 -->
    <video id="trial2a">
        <source src="assets/PiDi_3_2a_gg.mp4" type="video/mp4">
    </video>
    <video id="trial2b">
        <source src="assets/PiDi_3_2b.mp4" type="video/mp4">
    </video>
    <video id="trial2c">
        <source src="assets/PiDi_3_2d.mp4" type="video/mp4">
    </video>
    <video id="trial2d">
        <source src="assets/PiDi_3_2c.mp4" type="video/mp4">
    </video>
    <!-- Trial 3 -->
    <video id="trial3a">
        <source src="assets/PiDi_3_3a_gg.mp4" type="video/mp4">
    </video>
    <video id="trial3b">
        <source src="assets/PiDi_3_3b.mp4" type="video/mp4">
    </video>
    <video id="trial3c">
        <source src="assets/PiDi_3_3d.mp4" type="video/mp4">
    </video>
    <video id="trial3d">
        <source src="assets/PiDi_3_3c.mp4" type="video/mp4">
    </video>
    <!-- Trial 4 -->
    <video id="trial4a">
        <source src="assets/PiDi_3_4a_gg.mp4" type="video/mp4">
    </video>
    <video id="trial4b">
        <source src="assets/PiDi_3_4b.mp4" type="video/mp4">
    </video>
    <video id="trial4c">
        <source src="assets/PiDi_3_4c.mp4" type="video/mp4">
    </video>
    <video id="trial4d">
        <source src="assets/PiDi_3_4d.mp4" type="video/mp4">
    </video>
    <!-- Pragmatic Task -->
    <video id="p1">
        <source src="assets/PiDi_4.mp4" type="video/mp4">
    </video>
    <video id="p2">
        <source src="assets/PiDi_5a_1.mp4" type="video/mp4">
    </video>
    <video id="p3">
        <source src="assets/PiDi_5b_1.mp4" type="video/mp4">
    </video>
    <video id="p4">
        <source src="assets/PiDi_5c_1.mp4" type="video/mp4">
    </video>
    <video id="p5">
        <source src="assets/PiDi_5d_1.mp4" type="video/mp4">
    </video>
    <video id="p6">
        <source src="assets/PiDi_5e_1.mp4" type="video/mp4">
    </video>
    <!-- End -->
    <video id="end">
        <source src="assets/PiDi_5f.mp4" type="video/mp4">
    </video>
</div>

<div id="title">
    <h2>This is a demonstration for Moty & Rhodes (2019)</h2>
</div>

<div id="startButtons"> 
    <button id='study1' type="submit">Study 1</button>
    <button id='study2' type="submit">Study 2</button>
    <button id='study3' type="submit">Study 3</button>
</div>

<button id='left' class='response' type="submit">Zarpies</button>
<button id='right' class='response' type="submit">Gorps</button>
<button id='invisible' class='invisible' type="submit">Nothing</button>


<script>
    var video_count = 0;
    
    var study1_videos = ["video1", "video2", "video3", "video4","video5", "video6", 
    "trial1a", "trial1b", "trial1c", "trial1d","trial2a", "trial2b", "trial2d", "trial2c",
    "trial3a", "trial3b", "trial3d", "trial3c","trial4a", "trial4b", "trial4c", "trial4d",
    "p1", "p2", "p3", "p4", "p5", "p6", "end"
    ]
    var study1_buttons = ["response","response","response","invisible","invisible", "none",
    "none","none","invisible","invisible","none","none","invisible","invisible",
    "none","none","invisible","invisible","none","none","invisible","invisible",
    "invisible","invisible","invisible","invisible","invisible","invisible","end"
    ]

    function run(){
        console.log("we are on video", video_count);
        document.getElementById(study1_videos[video_count]).style.visibility = "visible";
        document.getElementById(study1_videos[video_count]).play();
        document.getElementById(study1_videos[video_count]).onended = function () {
            displayButtons();
        }
    };

    function displayButtons(){
        if (study1_buttons[video_count] == "response"){
            var buttons = document.querySelectorAll('.response')
            buttons.forEach((value) => {
                value.style.visibility = "visible";
                value.onclick = function(){
                    video_count++;
                    buttons.forEach((value) => {
                        value.style.visibility = "hidden";
                    })
                    run();
                }
            })
        } else if (study1_buttons[video_count] == "invisible"){
            console.log(document.querySelector('.invisible'));
            document.querySelector('.invisible').style.visibility = "visible";
            document.querySelector('.invisible').onclick = function(){
                video_count++;
                document.querySelector('.invisible').style.visibility = "hidden";
                run();
            }
        } else if (study1_buttons[video_count] == "end") {
            location.reload();
        } else {
            video_count++;
            run();
        }
        
    };

    study1.onclick = function () {
        run();
        document.getElementById("study2").remove();
        document.getElementById("study3").remove();
        document.getElementById("title").remove();
        this.remove();
    }

</script>

</body>
</html>